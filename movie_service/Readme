# Movie Service API

This API allows you to manage movies, genres, and user ratings.

## Table of Contents

- [Base URL](#base-url)
- [Endpoints](#endpoints)
  - [Movies](#movies)
  - [Genres](#genres)
  - [Ratings](#ratings)

---

## Endpoints

### Movies

#### 1. Add a Movie

- **Endpoint:** `/movies`
- **Method:** `POST`
- **Request Body:**
  ```json
  {
    "title": "Inception",
    "genre_id": 1,
    "director": "Christopher Nolan",
    "release_date": "2010-07-16",
    "duration": 148,
    "synopsis": "A skilled thief is given a chance at redemption...",
    "cast": "Leonardo DiCaprio, Joseph Gordon-Levitt"
  }
  ```
- **Response:**
  - **201 Created**
    ```json
    {
      "message": "Movie added successfully!",
      "movie": {
        "id": 1,
        "title": "Inception",
        "genre_id": 1,
        "director": "Christopher Nolan",
        "release_date": "2010-07-16",
        "duration": 148,
        "synopsis": "A skilled thief is given a chance at redemption...",
        "cast": "Leonardo DiCaprio, Joseph Gordon-Levitt",
        "rating": 0
      }
    }
    ```

#### 2. Get All Movies

- **Endpoint:** `/movies`
- **Method:** `GET`
- **Response:**
  - **200 OK**
    ```json
    [
      {
        "id": 1,
        "title": "Inception",
        "genre": {"id": 1, "name": "Sci-Fi"},
        "director": "Christopher Nolan",
        "release_date": "2010-07-16",
        "duration": 148,
        "synopsis": "A skilled thief is given a chance at redemption...",
        "cast": "Leonardo DiCaprio, Joseph Gordon-Levitt",
        "rating": 4.5
      }
    ]
    ```

#### 3. Get a Specific Movie

- **Endpoint:** `/movies/<id>`
- **Method:** `GET`
- **Response:**
  - **200 OK**
    ```json
    {
      "id": 1,
      "title": "Inception",
      "genre": {"id": 1, "name": "Sci-Fi"},
      "director": "Christopher Nolan",
      "release_date": "2010-07-16",
      "duration": 148,
      "synopsis": "A skilled thief is given a chance at redemption...",
      "cast": "Leonardo DiCaprio, Joseph Gordon-Levitt",
      "rating": 4.5
    }
    ```
  - **404 Not Found**
    ```json
    {
      "error": "Movie not found"
    }
    ```

#### 4. Update a Movie

- **Endpoint:** `/movies/<id>`
- **Method:** `PUT`
- **Request Body:** (partial or complete movie data)
  ```json
  {
    "title": "Inception Updated",
    "duration": 150
  }
  ```
- **Response:**
  - **200 OK**
    ```json
    {
      "message": "Movie updated successfully!",
      "movie": {
        "id": 1,
        "title": "Inception Updated",
        "duration": 150,
        ...
      }
    }
    ```
  - **404 Not Found**
    ```json
    {
      "error": "Movie not found"
    }
    ```

#### 5. Delete a Movie

- **Endpoint:** `/movies/<id>`
- **Method:** `DELETE`
- **Response:**
  - **200 OK**
    ```json
    {
      "message": "Movie deleted successfully!"
    }
    ```
  - **404 Not Found**
    ```json
    {
      "error": "Movie not found"
    }
    ```

---

### Genres

#### 1. Add a Genre

- **Endpoint:** `/genres`
- **Method:** `POST`
- **Request Body:**
  ```json
  {
    "name": "Sci-Fi"
  }
  ```
- **Response:**
  - **201 Created**
    ```json
    {
      "message": "Genre added successfully!"
    }
    ```

#### 2. Get All Genres

- **Endpoint:** `/genres`
- **Method:** `GET`
- **Response:**
  - **200 OK**
    ```json
    [
      {
        "id": 1,
        "name": "Sci-Fi"
      }
    ]
    ```

---

### Ratings

#### 1. Rate a Movie

- **Endpoint:** `/movies/<id>/rate`
- **Method:** `POST`
- **Request Body:**
  ```json
  {
    "user_id": 1,
    "score": 4.5
  }
  ```
- **Response:**
  - **200 OK**
    ```json
    {
      "message": "Rating submitted successfully!"
    }
    ```
  - **400 Bad Request** (if score is out of range or user_id is missing)
    ```json
    {
      "error": "Score must be between 1 and 5"
    }
    ```
  - **404 Not Found**
    ```json
    {
      "error": "Movie not found"
    }
    ```

#### 2. Get All Movies Rated by a User

- **Endpoint:** `/users/<user_id>/rated_movies`
- **Method:** `GET`
- **Response:**
  - **200 OK**
    ```json
    [
      {
        "movie_id": 1,
        "title": "Inception",
        "genre": "Sci-Fi",
        "director": "Christopher Nolan",
        "release_date": "2010-07-16",
        "duration": 148,
        "synopsis": "A skilled thief is given a chance at redemption...",
        "cast": "Leonardo DiCaprio, Joseph Gordon-Levitt",
        "average_rating": 4.5,
        "user_rating": 4.5
      }
    ]
    ```
  - **200 OK** (if no movies rated by user)
    ```json
    []
    ```